# Task ID: 49
# Title: Integrate Database Scripts
# Status: pending
# Dependencies: 48
# Priority: high
# Description: Ensure all SQL files work together properly and initialize the database correctly on first run.
# Details:
1. Review and organize existing SQL scripts:
   - roles.sql
   - jwt.sql
   - realtime.sql
   - vector.sql
   - webhooks.sql
   - logs.sql
   - pooler.sql

2. Create a master initialization script that runs all SQL files in the correct order

3. Implement idempotent execution (scripts can be run multiple times safely)

4. Add version tracking to database schema

5. Create a database initialization check that runs on startup:
   ```sql
   CREATE OR REPLACE FUNCTION check_db_initialized()
   RETURNS boolean AS $$
   BEGIN
     -- Check if core tables exist
     RETURN EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = 'roles');
   END;
   $$ LANGUAGE plpgsql;
   ```

6. Ensure all extensions are properly installed and configured

7. Test script execution in both fresh and existing database environments

# Test Strategy:
1. Test initialization on a clean database
2. Verify all tables, functions, and extensions are created correctly
3. Test re-running scripts to ensure idempotency
4. Validate permissions and roles are correctly assigned
5. Check that vector extensions work with sample queries
6. Verify realtime subscriptions can be established
